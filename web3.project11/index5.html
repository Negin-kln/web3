<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lazy Loading بدون کتابخانه</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      img {
        width: 400px;
        height: 400px;
      }
    </style>
  </head>
  <body>
    <p>
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet ad
      dignissimos quibusdam! Voluptate corporis sunt omnis blanditiis ratione
      dicta dolorum. Rem, architecto distinctio dolores quaerat culpa expedita
      vero saepe atque!
    </p>
    <img data-src="assets/image/1.jpg" alt="توضیح تصویر" class="lazyload" />
    <p>
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet ad
      dignissimos quibusdam! Voluptate corporis sunt omnis blanditiis ratione
      dicta dolorum. Rem, architecto distinctio dolores quaerat culpa expedita
      vero saepe atque!
    </p>
    <img data-src="assets/image/2.jfif" alt="توضیح تصویر" class="lazyload" />
    <p>
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet ad
      dignissimos quibusdam! Voluptate corporis sunt omnis blanditiis ratione
      dicta dolorum. Rem, architecto distinctio dolores quaerat culpa expedita
      vero saepe atque!
    </p>
    <img data-src="assets/image/3.jfif" alt="توضیح تصویر" class="lazyload" />
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let lazyImages = document.querySelectorAll("img.lazyload");

        let lazyLoad = function () {
          lazyImages.forEach(function (img) {
            if (
              img.getBoundingClientRect().top <= window.innerHeight &&
              img.getBoundingClientRect().bottom >= 0 &&
              getComputedStyle(img).display !== "none"
            ) {
              img.src = img.dataset.src;
              img.classList.remove("lazyload");
            }
          });
        };

        // بارگذاری تصاویر هنگام اسکرول
        window.addEventListener("scroll", lazyLoad);
        window.addEventListener("resize", lazyLoad);
        window.addEventListener("orientationchange", lazyLoad);

        // بارگذاری تصاویر در ابتدا
        lazyLoad();
      });
    </script>
  </body>
</html>
